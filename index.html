<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Poker Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:-apple-system;background:#0f172a;color:#fff;padding:16px}
h1,h2{margin-top:24px}
input,button{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:none}
button{background:#22c55e;font-size:16px;font-weight:600}
table{width:100%;margin-top:10px;border-collapse:collapse}
th,td{padding:8px;text-align:center;border-bottom:1px solid #334155}
canvas{background:#fff;border-radius:12px;padding:10px}
</style>
</head>

<body>

<h1>‚ô†Ô∏è Poker Tracker</h1>

<h2>Inserisci partita</h2>
<input type="date" id="date">

<div id="inputs"></div>

<button onclick="saveGame()">Salva partita</button>

<h2>üèÜ Classifica totale (‚Ç¨)</h2>
<table id="ranking"></table>

<h2>üìà Guadagni cumulativi</h2>
<canvas id="chart"></canvas>

<script>
const players=["Giocatore 1","Giocatore 2","Giocatore 3","Giocatore 4","Giocatore 5","Giocatore 6"];
let data=JSON.parse(localStorage.getItem("pokerData")||"[]");

const inputs=document.getElementById("inputs");
players.forEach(p=>{
  inputs.innerHTML+=`<label>${p}</label><input type="number" id="${p}" placeholder="‚Ç¨">`;
});

function saveGame(){
  const date=document.getElementById("date").value;
  players.forEach(p=>{
    const v=document.getElementById(p).value;
    if(v){
      data.push({date,player:p,value:parseInt(v)});
      document.getElementById(p).value="";
    }
  });
  localStorage.setItem("pokerData",JSON.stringify(data));
  render();
}

function render(){
  const totals={};
  players.forEach(p=>totals[p]=0);
  data.forEach(d=>totals[d.player]+=d.value);

  const rank=document.getElementById("ranking");
  rank.innerHTML="<tr><th>Giocatore</th><th>‚Ç¨</th></tr>";
  Object.entries(totals).sort((a,b)=>b[1]-a[1]).forEach(r=>{
    rank.innerHTML+=`<tr><td>${r[0]}</td><td>${r[1]}</td></tr>`;
  });

  const labels=[...new Set(data.map(d=>d.date))];
  const datasets=players.map(p=>{
    let sum=0;
    return{
      label:p,
      data:labels.map(l=>{
        data.filter(d=>d.player===p && d.date<=l).forEach(d=>sum+=d.value);
        return sum;
      })
    }
  });

  new Chart(document.getElementById("chart"),{
    type:"line",
    data:{labels,datasets},
    options:{responsive:true}
  });
}

render();
</script>

</body>
</html>
